<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="${title}">Task 6.2</title>
    <link rel="stylesheet" href="/style.css">
</head>
<body>
<div class="sidebar">
    <h3>Laboratory Works</h3>
    <ul>
        <li><a th:href="@{/}">Main page</a></li>
        <li><a th:href="@{/task1}">Task : 1</a></li>
        <li><a th:href="@{/task2}">Task : 2</a></li>
        <li><a th:href="@{/task3}">Task : 3</a></li>
        <li><a th:href="@{/task4}">Task : 4</a></li>
        <li><a th:href="@{/task6}">Task : 6</a></li>
        <li><a th:href="@{/task6_2}">Task : 6.2</a></li>
        <li><a th:href="@{/task7}">Task : 7</a></li>
    </ul>
</div>

<div class="content">
    <!-- Default Matrix Display -->
    <div class="card">
        <h2>10x10 Matrix</h2>
        <div class="table-wrapper">
            <table>
                <tr th:each="row, rowStat : ${defaultMatrix}">
                    <td th:each="element, colStat : ${row}"
                        th:text="${element}"
                        th:class="${highlightedCells != null} ?
                                  (${#lists.contains(highlightedCells, new int[]{rowStat.index, colStat.index})} ? 'highlighted' : '') : ''">
                    </td>
                </tr>
            </table>
        </div>
    </div>

    <!-- ======= SUM OF POSITIVE ELEMENTS IN MATRIX ======= -->
    <div class="card">
        <h2>Sum of Positive Elements in Matrix</h2><br>
        <form method="post" action="/task6_2/sum">
            <input type="hidden" name="matrixInput" th:value="${matrixString}">
            <div style="display: flex; gap: 20px; justify-content: center; width: 100%;">
                <div style="flex: 1;">
                    <label>Outer limit (rows):</label>
                    <input type="number" name="outerLimit" placeholder="e.g. 5" min="0" max="10" required
                           th:value="${outerLimit != null} ? ${outerLimit} : '10'">
                </div>
                <div style="flex: 1;">
                    <label>Inner limit (columns):</label>
                    <input type="number" name="innerLimit" placeholder="e.g. 5" min="0" max="10" required
                           th:value="${innerLimit != null} ? ${innerLimit} : '10'">
                </div>
            </div>
            <button type="submit">Calculate Sum</button>
        </form>

        <!-- Ошибка для sum -->
        <div th:if="${sumError != null}" class="error-box">
            <p th:text="${sumError}"></p>
        </div>

        <!-- Результат для sum -->
        <div th:if="${sumResult != null}" class="previous">
            <h3>Result:</h3>
            <p th:utext="${sumResult}"></p>
        </div>
    </div></div>
</body>
</html>